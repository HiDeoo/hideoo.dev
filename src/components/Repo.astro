---
import { type GitHubRepo } from '../libs/github'

import Card from './Card.astro'
import CardRow from './CardRow.astro'
import LanguageTags from './LanguageTags.astro'
import Stars from './Stars.astro'
import VisuallyHidden from './VisuallyHidden.astro'

export interface Props {
  repo: GitHubRepo
}

const { repo } = Astro.props
---

<Card as="article" href={repo.url} target="_blank" title={`Open ${repo.name} GitHub repository`} class="card-repo">
  <CardRow>
    <strong>{repo.name}</strong>
    <VisuallyHidden end />
  </CardRow>
  <CardRow small grow>
    {repo.description}
    {repo.description?.at(-1) !== '.' ? <VisuallyHidden end /> : null}
  </CardRow>
  <CardRow small raw row>
    <LanguageTags languages={repo.languages} />
    {repo.stars > 0 ? <Stars count={repo.stars} /> : null}
  </CardRow>
</Card>

<style>
  .card-repo > :global(a::after) {
    content: none;
  }

  strong {
    font-size: var(--text-size-lg);
  }
</style>
